# 3주차

# 활동내용
- 객체 포인터
- 객체 배열 생성 및 소멸
- 배열 생성과 활용
- 객체 배열 생성시 기본 생성자 호출
- 객체 배열 초기화
- 2차원 배열
- 동적 메모리 할당 및 반환
- new와 delete 연산자
- 기본 타입의 메모리 동적 할당 및 반환
- delete 사용시 주의 사항

ppt 4장 19p

# 정리

## 객체 포인터
- 객체에 대한 포인터
	- c언어의 포인터와 동일
	- 객체의 주소 값을 가지는 변수
- 포인터로 멤버를 접근할 때
	- 객체포인터->멤버

## 객체 배열, 생성 및 소멸
### 객체 배열 선언 가능
- 기본 타입 배열 선언과 형식 동일
```
int n[3];//정수형 배열 선언
Circle c[3];//Circle 타입의 배열 선언
```

### 객체 배열 선언
- 객체 배열을 위한 공간 할당<br> 
- 배열의 각 원소 객체마다 생성자 실행
```
c[0]의 생성자, c[1]의 생성자, ... , 각각 실행
매개 변수 없는 생성자 호출
```
- 매개 변수 있는 생성자를 호출할 수 없음
``` cpp
Circle circleArray[3];//error
```

### 배열 소멸
- 배열의 각 객체마다 소멸자 호출. 생성의 반대순으로 소멸
```
c[2]의 소멸자, c[1]의 소멸자, c[0]의 소멸자 실행
```

## 동적 메모리 할당 및 반환

### 정적 할당
- 변수 선언을 통해 필요한 메모리 할당
	- 많은 양의 메모리는 배열 선언을 통해 할당

### 동적 할당
- 필요한 양이 예측되지 않는 경우. 프로그램 작성시 할당 불가
- 실행 중에 OS로부터 heap영역에 할당

### C++의 동적 메모리 할당/반환
- new 연산자
	- 기본 타입 메모리 할당, 배열 할당, 객체 할당, 객체 배열 할당
	- 객체의 동적 생성. 힙 메모리로부터 객체를 위한 메모리 할당 요청
	- 객체 할당시 생성자 호출

- delete 연산자
	- new로 할당 받은 메모리 반환
	- 객체의 동적 소멸. 소멸자 호출 뒤 객체를 힙에 반환

## new 와 delete 연산자

- new/delete 연산자의 사용 형식
```
데이터타입 * 포인터변수 = new 데이터타입;
delete 포인터변수;
```

- new/delete의 사용
```C++
int* pInt = new int;//int타입의 메모리 동적 할당
char* pChar = new char;char타입의 메모리 동적 할당
Circle *pCircle = new Circle();//Circle 클래스 타입의 메모리 동적 할당

delete pInt;//할당 받은 정수 공간 반환
delete pChar//할당 받은 문자 공간 반환
delete pCircle;//할당 받은 객체 공간 반환
```

### delete 사용시 주의 사항
적절치 못한 포인터로 delete 하면 런타임에러.
- 동적으로 할당 받지 않는 메모리 반환 - 오류
```cpp
int n;
int* p = &n;
delete p;//runtime error
//포인터 p가 가리키는 메로리는 동적으로 할당 받은 것이 아님
```
- 동일한 메모리 두 번 반환 - 오류
```cpp
int *p = new int;
delete p;//정상적인 메모리 반환
delete p;//runtime error. 이미 반환한 메모리를 중복 반환할 수 없음.